---
title: "Mandelbrot Set(이론)"
category:
    - 실습
tag:
    - javascript
    - 모던 자바스크립트 인문
toc: true
---

### 망델브로 집합 _ 이론과 식 

평면에 **프랙털** 도형을 그리는 알고리즘

**프랙털**도형: 아무리 확대해도 복잡한 도형

---

* #### 정의

점화식
   
Z~n+1~ = Z~n~^2^ + c 

Z~0~ = 0 


1. c: 복소수, Z~n~: 복소평면 위의 수열

    c = x + iy

2. n이 **무한히 발산되지 않는 성질**을 갖는 복소수 c의 집합을 망델브로 집합이라고 함


3. 수열 Z~n~의 움직임은 c의 값에 따라 다양하게 변화

---

* #### 점화식의 성질 

- c가 망델브로 집합에 속하는 것과 모든 n에 대해 |Z~n~| <= 2 이다.

- 망델브로 집합은 |Z~n~|<=2의 범위 안에 있다.

- 망델브로 집합과 실수 축의 공통부분은 폐구간 [-2, 1/4]이다.

---

* #### 망델브로 집합 그리는 법

복소수 c = x + iy를 2차원 좌표 (x,y)로 간주하여 각 (X,y)에서 Z~n~이 발산하는지를 확인 

발산하지 않는 점은 망델브로 집합에 속하는 점으로 검은색으로 칠해짐 

1. 뷰 포트 전환

**월드 좌표계:** 컴퓨테 그래픽스에서의 (x,y)좌표

**뷰 좌표계:** Canvas의 좌표계 (i,j)

뷰 포트 전환이란? 월드 좌표계와 뷰 좌표계의 함수 관계를 정의


![망델브로 집합](https://user-images.githubusercontent.com/83913407/126896899-dde720e2-c015-40c1-a19d-7ed91230a406.jpg)

-**월드 좌표계**

x축 방향의 범위: xmin, xmax

       xmin = xc - 1/mag

       xmax = xc + 1/mag

y축 방향의 범위: ymin, ymax

    ymin = yc - (xmax-xmin)*h/w/2;

    ymax = yc + (xmax-xmin)*h/w/2;

**(xc,xy): Canvas의 가운데 픽셀에 대응하는 원드 좌표계의 점**

**mag: 배율**

점 좌표: (x,y)


    x = xmin + i*dx;

    dx= (Xmax-xmin)/w;

    y = ymin + j*dy;

    dy = (ymax-ymin)/h;


-**뷰 좌표계**

원점: Canvas 왼쪽 위 꼭짓점 

영역의 너비: Canvas의 너비 w

영역의 높이: Canvas의 높이 h

픽셀 좌표: (i, j)

---

* #### 망델브로 집합 판정법

점(x,y)가 망델브로 집합에 속하는지 판정하는 방법

-> **모든 n에 대해 |Z~n~| <=2 이다**는 성질 이용

1. n의 상한선인 maxit을 정하고, maxit이하의 모든 값들이 |Z~n~| <=2에 속하면 c가 망델브로 집합에 속함.


2. maxit이 클수록 위의 조건에 근접하게 된다. **즉, maxit이 클수록 근삿값의 정확도가 함께 높아짐**


3. 배율을 확대해서 표시하고 싶다면, 그에 비례하여 maxit값을 크게 설정하면 됨.



**판정법**

Z~n~ = a+bi

Z~n+1~ = a^'^ + b^'^i

a^'^ = a*a -b*b +x 

b^'^ = 2*a*b + y

a^'^*a^'^ + b^'^*b^'^ <= 4 (Z~n+1~이 |c|<=2범위 안에 속하는 지 판정하는 식)